CREATE TABLE Employee (
    eid INT,
    ename VARCHAR(30),
    salary INT,
    dNo INT,
    address VARCHAR(50),
    CONSTRAINT Employee_pk PRIMARY KEY (eid),

);

CREATE TABLE Department (
    deptNo INT,
    dname VARCHAR(50),
    building VARCHAR(15),
    managerID INT,
    CONSTRAINT department_pk PRIMARY KEY (deptNo),
    
);

drop table Employee;
drop table Department;

ALTER TABLE Employee
ADD CONSTRAINT Employee_FK foreign key(dno) REFERENCES Department(deptNo);

ALTER TABLE Department
ADD CONSTRAINT Department_FK foreign key(managerID) REFERENCES Employee(eid);

-- Insert 4 rows of data into the Employee table
INSERT INTO Employee (eid, ename, salary, dNo, address)
VALUES
    (1, 'John Doe', 50000, 1, '123 Main St'),
    (2, 'Jane Smith', 60000, 2, '456 Elm St'),
    (3, 'Alice Johnson', 55000, 1, '789 Oak St'),
    (4, 'Bob Brown', 52000, 3, '101 Pine St');

	-- Insert 4 rows of data into the Department table
INSERT INTO Department (deptNo, dname, building, managerID)
VALUES
    (1, 'HR', 'Building A', NULL),
    (2, 'Engineering', 'Building B', NULL),
    (3, 'Sales', 'Building C', NULL),
    (4, 'IT', 'Building D', NULL);

UPDATE Department
SET managerID = 1
WHERE deptNo = 1;

UPDATE Department
SET managerID = 1
WHERE deptNo = 2;

UPDATE Department
SET managerID = 2
WHERE deptNo = 3;

UPDATE Department
SET managerID = 3
WHERE deptNo = 4;

SELECT ename
FROM Employee;

SELECT E.ename
FROM Employee E,Department D
WHERE E.eid = D.managerID AND dname = 'Administration';

SELECT E.ename
FROM Employee E,Department D
WHERE E.eid = D.managerID AND salary > 50000 AND dname = 'Administration';

SELECT E.ename
FROM Employee E,Department D
WHERE E.eid = D.managerID;

SELECT E.ename
FROM Employee E,Department D
WHERE E.eid = D.managerID AND (D.dname = 'Administration' OR D.dname = 'Sales');



SELECT E.ename
FROM Employee E,Department D
WHERE E.eid = D.managerID AND (D.dname = 'Administration' AND D.dname = 'Sales');


SELECT E.ename
FROM Employee E,Department D
WHERE E.eid = D.managerID AND (D.dname = 'Administration' AND D.dname <> 'Sales');

SELECT E.ename,D.dname
FROM Employee E,Department D
WHERE E.eid = D.managerID;


SELECT D.dname,count(eid) AS 'No of Employees'
FROM Employee E,Department D
WHERE E.eid = D.managerID
group by D.dname;

SELECT D.dname,count(eid)
FROM Employee E,Department D
WHERE E.eid = D.managerID
group by D.dname
HAVING COUNT(E.eid) > 10;


SELECT E.ename 
FROM Employee E
WHERE  E.salary > ALL (SELECT E.salary
				   FROM Employee E,Department D
				   WHERE dNo = (SELECT deptNo
								FROM Department D
								WHERE dname = 'Sales'));

SELECT E.ename 
FROM Employee E
WHERE  E.salary > ANY (SELECT E.salary
				   FROM Employee E,Department D
				   WHERE dNo = (SELECT deptNo
								FROM Department D
								WHERE dname = 'Sales'));

